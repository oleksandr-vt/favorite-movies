import{r as _,z as V,o as i,c as l,a as v,A as w,B as H,n as u,C as B,x as F,p as N,e as R,D as r,E as c,s as f,F as P,v as x,G as m,d as b,t as C,q as T,u as E,b as S,H as K,w as L}from"./entry.42a7e500.js";import{u as M}from"./searchStore.ba8953ef.js";import{u as I,a as q}from"./helpers.09fe959b.js";import{B as G,M as A,a as D}from"./MovieCard.698c4753.js";import{_ as U}from"./_plugin-vue_export-helper.c27b6911.js";import"./nuxt-link.050b2ec3.js";import"./Button.d47af0ba.js";const z=n=>(N("data-v-d07ebd07"),n=n(),R(),n),O={for:"search"},Y=z(()=>v("h6",null,"Enter the name of the movie (in any language):",-1)),j={__name:"SearchForm",props:{onGetMovies:{type:Function,required:!1},onHideError:{type:Function,required:!1},searchStr:{type:String,required:!1}},setup(n){const t=n,e=_("");return V(()=>{t.searchStr&&(e.value=t.searchStr)}),(g,d)=>(i(),l("form",{class:"search",onSubmit:d[2]||(d[2]=F(s=>n.onGetMovies(u(e)),["prevent"]))},[v("label",O,[Y,w(v("input",{"onUpdate:modelValue":d[0]||(d[0]=s=>B(e)?e.value=s:null),onInput:d[1]||(d[1]=s=>n.onHideError()),id:"search",type:"search",placeholder:"Search...",minlength:"2",maxlength:"80"},null,544),[[H,u(e)]])])],32))}},J=U(j,[["__scopeId","data-v-d07ebd07"]]);var Q=(n,t)=>{const e=n.__vccOpts||n;for(const[g,d]of t)e[g]=d;return e};const W={data(){return{innerValue:1}},props:{modelValue:{type:Number},pageCount:{type:Number,required:!0},initialPage:{type:Number,default:1},forcePage:{type:Number},clickHandler:{type:Function,default:()=>{}},pageRange:{type:Number,default:3},marginPages:{type:Number,default:1},prevText:{type:String,default:"Prev"},nextText:{type:String,default:"Next"},breakViewText:{type:String,default:"â€¦"},containerClass:{type:String,default:"pagination"},pageClass:{type:String,default:"page-item"},pageLinkClass:{type:String,default:"page-link"},prevClass:{type:String,default:"page-item"},prevLinkClass:{type:String,default:"page-link"},nextClass:{type:String,default:"page-item"},nextLinkClass:{type:String,default:"page-link"},breakViewClass:{type:String},breakViewLinkClass:{type:String},activeClass:{type:String,default:"active"},disabledClass:{type:String,default:"disabled"},noLiSurround:{type:Boolean,default:!1},firstLastButton:{type:Boolean,default:!1},firstButtonText:{type:String,default:"First"},lastButtonText:{type:String,default:"Last"},hidePrevNext:{type:Boolean,default:!1}},computed:{selected:{get:function(){return this.modelValue||this.innerValue},set:function(n){this.innerValue=n}},pages:function(){let n={};if(this.pageCount<=this.pageRange)for(let t=0;t<this.pageCount;t++){let e={index:t,content:t+1,selected:t===this.selected-1};n[t]=e}else{const t=Math.floor(this.pageRange/2);let e=a=>{let o={index:a,content:a+1,selected:a===this.selected-1};n[a]=o},g=a=>{let o={disabled:!0,breakView:!0};n[a]=o};for(let a=0;a<this.marginPages;a++)e(a);let d=0;this.selected-t>0&&(d=this.selected-1-t);let s=d+this.pageRange-1;s>=this.pageCount&&(s=this.pageCount-1,d=s-this.pageRange+1);for(let a=d;a<=s&&a<=this.pageCount-1;a++)e(a);d>this.marginPages&&g(d-1),s+1<this.pageCount-this.marginPages&&g(s+1);for(let a=this.pageCount-1;a>=this.pageCount-this.marginPages;a--)e(a)}return n}},methods:{handlePageSelected(n){this.selected!==n&&(this.innerValue=n,this.$emit("update:modelValue",n),this.clickHandler(n))},prevPage(){this.selected<=1||this.handlePageSelected(this.selected-1)},nextPage(){this.selected>=this.pageCount||this.handlePageSelected(this.selected+1)},firstPageSelected(){return this.selected===1},lastPageSelected(){return this.selected===this.pageCount||this.pageCount===0},selectFirstPage(){this.selected<=1||this.handlePageSelected(1)},selectLastPage(){this.selected>=this.pageCount||this.handlePageSelected(this.pageCount)}},beforeMount(){this.innerValue=this.initialPage},beforeUpdate(){this.forcePage!==void 0&&this.forcePage!==this.selected&&(this.selected=this.forcePage)}},X=["tabindex","innerHTML"],Z=["tabindex","innerHTML"],p=["onClick","onKeyup"],$=["tabindex","innerHTML"],ee=["tabindex","innerHTML"],te=["innerHTML"],ae=["innerHTML"],se=["onClick","onKeyup"],ne=["innerHTML"],ie=["innerHTML"];function le(n,t,e,g,d,s){return e.noLiSurround?(i(),l("div",{key:1,class:r(e.containerClass)},[e.firstLastButton?(i(),l("a",{key:0,onClick:t[8]||(t[8]=a=>s.selectFirstPage()),onKeyup:t[9]||(t[9]=c(a=>s.selectFirstPage(),["enter"])),class:r([e.pageLinkClass,s.firstPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.firstButtonText},null,42,te)):f("",!0),s.firstPageSelected()&&e.hidePrevNext?f("",!0):(i(),l("a",{key:1,onClick:t[10]||(t[10]=a=>s.prevPage()),onKeyup:t[11]||(t[11]=c(a=>s.prevPage(),["enter"])),class:r([e.prevLinkClass,s.firstPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.prevText},null,42,ae)),(i(!0),l(P,null,x(s.pages,a=>(i(),l(P,null,[a.breakView?(i(),l("a",{key:a.index,class:r([e.pageLinkClass,e.breakViewLinkClass,a.disabled?e.disabledClass:""]),tabindex:"0"},[m(n.$slots,"breakViewContent",{},()=>[b(C(e.breakViewText),1)])],2)):a.disabled?(i(),l("a",{key:a.index,class:r([e.pageLinkClass,a.selected?e.activeClass:"",e.disabledClass]),tabindex:"0"},C(a.content),3)):(i(),l("a",{key:a.index,onClick:o=>s.handlePageSelected(a.index+1),onKeyup:c(o=>s.handlePageSelected(a.index+1),["enter"]),class:r([e.pageLinkClass,a.selected?e.activeClass:""]),tabindex:"0"},C(a.content),43,se))],64))),256)),s.lastPageSelected()&&e.hidePrevNext?f("",!0):(i(),l("a",{key:2,onClick:t[12]||(t[12]=a=>s.nextPage()),onKeyup:t[13]||(t[13]=c(a=>s.nextPage(),["enter"])),class:r([e.nextLinkClass,s.lastPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.nextText},null,42,ne)),e.firstLastButton?(i(),l("a",{key:3,onClick:t[14]||(t[14]=a=>s.selectLastPage()),onKeyup:t[15]||(t[15]=c(a=>s.selectLastPage(),["enter"])),class:r([e.pageLinkClass,s.lastPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.lastButtonText},null,42,ie)):f("",!0)],2)):(i(),l("ul",{key:0,class:r(e.containerClass)},[e.firstLastButton?(i(),l("li",{key:0,class:r([e.pageClass,s.firstPageSelected()?e.disabledClass:""])},[v("a",{onClick:t[0]||(t[0]=a=>s.selectFirstPage()),onKeyup:t[1]||(t[1]=c(a=>s.selectFirstPage(),["enter"])),class:r(e.pageLinkClass),tabindex:s.firstPageSelected()?-1:0,innerHTML:e.firstButtonText},null,42,X)],2)):f("",!0),s.firstPageSelected()&&e.hidePrevNext?f("",!0):(i(),l("li",{key:1,class:r([e.prevClass,s.firstPageSelected()?e.disabledClass:""])},[v("a",{onClick:t[2]||(t[2]=a=>s.prevPage()),onKeyup:t[3]||(t[3]=c(a=>s.prevPage(),["enter"])),class:r(e.prevLinkClass),tabindex:s.firstPageSelected()?-1:0,innerHTML:e.prevText},null,42,Z)],2)),(i(!0),l(P,null,x(s.pages,a=>(i(),l("li",{key:a.index,class:r([e.pageClass,a.selected?e.activeClass:"",a.disabled?e.disabledClass:"",a.breakView?e.breakViewClass:""])},[a.breakView?(i(),l("a",{key:0,class:r([e.pageLinkClass,e.breakViewLinkClass]),tabindex:"0"},[m(n.$slots,"breakViewContent",{},()=>[b(C(e.breakViewText),1)])],2)):a.disabled?(i(),l("a",{key:1,class:r(e.pageLinkClass),tabindex:"0"},C(a.content),3)):(i(),l("a",{key:2,onClick:o=>s.handlePageSelected(a.index+1),onKeyup:c(o=>s.handlePageSelected(a.index+1),["enter"]),class:r(e.pageLinkClass),tabindex:"0"},C(a.content),43,p))],2))),128)),s.lastPageSelected()&&e.hidePrevNext?f("",!0):(i(),l("li",{key:2,class:r([e.nextClass,s.lastPageSelected()?e.disabledClass:""])},[v("a",{onClick:t[4]||(t[4]=a=>s.nextPage()),onKeyup:t[5]||(t[5]=c(a=>s.nextPage(),["enter"])),class:r(e.nextLinkClass),tabindex:s.lastPageSelected()?-1:0,innerHTML:e.nextText},null,42,$)],2)),e.firstLastButton?(i(),l("li",{key:3,class:r([e.pageClass,s.lastPageSelected()?e.disabledClass:""])},[v("a",{onClick:t[6]||(t[6]=a=>s.selectLastPage()),onKeyup:t[7]||(t[7]=c(a=>s.selectLastPage(),["enter"])),class:r(e.pageLinkClass),tabindex:s.lastPageSelected()?-1:0,innerHTML:e.lastButtonText},null,42,ee)],2)):f("",!0)],2))}var re=Q(W,[["render",le]]);const de={__name:"Pagination",props:{totalPages:{type:Number,required:!1}},setup(n){const t=M(),e=g=>{t.getMovies({str:t.searchStr,page:g})};return(g,d)=>(i(),T(u(re),{pageCount:n.totalPages,clickHandler:e,prevText:"Prev",nextText:"Next",containerClass:"pagination"},null,8,["pageCount"]))}},ue=de,oe={class:"container"},Pe={__name:"index",setup(n){const t=M(),e=I(),g=q(),d=E(),s=o=>!!e.movies.find(y=>y.id===o),a=o=>{g.addMovie(o),d.push({path:`/movie/${o.id}`})};return(o,y)=>(i(),l("main",null,[v("div",oe,[S(J,{onHideError:()=>u(t).isError=!1,onGetMovies:h=>u(t).getMovies({str:h.trim(),isNewStr:!0}),searchStr:u(t).searchStr},null,8,["onHideError","onGetMovies","searchStr"]),S(G,{title:`Search results for "${u(t).searchStr}"`,totalResults:u(t).totalResults,isLoading:u(t).isLoading,isError:u(t).isError,errorMessage:`No results found for "${u(t).searchStr}"`,moviesLength:u(t).movies.length},K({movies:L(()=>[(i(!0),l(P,null,x(u(t).movies,h=>(i(),T(A,{key:h.id,movie:h,movieType:u(D).REGULAR,onClick:k=>a(h),onAddToFavorites:k=>u(t).addToFavorites(k),isMovieFavorite:k=>s(k)},null,8,["movie","movieType","onClick","onAddToFavorites","isMovieFavorite"]))),128))]),_:2},[u(t).totalPages>1&&!u(t).isNewSearchStr?{name:"pagination",fn:L(()=>[S(ue,{totalPages:u(t).totalPages},null,8,["totalPages"])]),key:"0"}:void 0]),1032,["title","totalResults","isLoading","isError","errorMessage","moviesLength"])])]))}};export{Pe as default};
